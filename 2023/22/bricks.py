from collections import defaultdict


bricks = []
with open("input.txt") as f:
    for line in f:
        cubes = []
        i, j = line.strip().split("~")
        i = eval(i)
        j = eval(j)
        if i == j:
            cubes.append(i)
            continue
        for axis in (0, 1, 2): # x, y, z
            # figure out whether i or j is bigger
            big,small = (i,j) if i[axis] > j[axis] else (j,i)
            # get the offset
            offset = big[axis] - small[axis]
            # create new cubes from the offset
            if offset:
                for k in range(offset+1):
                    cube = (
                        small[0] + k if axis == 0 else small[0], 
                        small[1] + k if axis == 1 else small[1], 
                        small[2] + k if axis == 2 else small[2]
                    )
                    cubes.append(cube)
        bricks.append(cubes)

# sort bricks by z
falling_bricks = sorted(bricks, key=lambda b: min([c[2] for c in b]))
print("falling bricks: ", {idx:b for idx,b in enumerate(falling_bricks)})

# cascade bricks to ground
settled_bricks = defaultdict(list)
settled_cubes = []
supporting_bricks = {} # key is supported by value
supported_bricks = {} # key is supporting value
for id,brick in enumerate(falling_bricks):
    supported_bricks[id] = set()
    if brick[0][2] == 1:
        # at least one cube of this brick is on ground, keep going
        settled_bricks[id] = brick
        settled_cubes.extend([(*c,id) for c in brick])
        supporting_bricks[id] = set()
    else:
        brick_xs = [c[0] for c in brick]
        brick_ys = [c[1] for c in brick]
        brick_zs = [c[2] for c in brick]        
        # look for x,y matches in settled_cubes, sorted by max z
        possible_supporting_cubes = [cube for cube in settled_cubes if cube[0] in brick_xs and cube[1] in brick_ys]
        if possible_supporting_cubes:
            sorted_supporting_cubes = sorted(possible_supporting_cubes, key=lambda c: c[2], reverse=True)
        else:
            sorted_supporting_cubes = [(None,None,0,None)]
            supporting_bricks[id] = set()
            supported_bricks[id] = set()

        z_offset = min(brick_zs) - (sorted_supporting_cubes[0][2] + 1)
        supporting_bricks[id] = set([c[3] for c in sorted_supporting_cubes if c[2] == sorted_supporting_cubes[0][2] and c[3] is not None])
        new_cubes = []
        for cube in brick:
            new_cubes.append((cube[0],cube[1],cube[2] - z_offset))
        settled_cubes.extend([(*c,id) for c in new_cubes])
        settled_bricks[id] = new_cubes

for id,supporting in supporting_bricks.items():
    for v in supporting:
        supported_bricks[v].add(id)

print("settled bricks: ", settled_bricks)
print("support system: ", supporting_bricks)
print("transposed: ", supported_bricks)

can_disintegrate = set()
for brick,supporting in supporting_bricks.items():
    if len(supporting) > 1:
        # other_supporting = set([v for id,s in supporting_bricks.items() for v in s if id != brick])
        other_supporting = set([id for id,s in supported_bricks.items() if len(s) > 1 and id != brick])

        # make sure to only delete bricks that aren't supporting others
        can_disintegrate.update(supporting - other_supporting)
        # if this brick and another brick have common supporting bricks, we can add both for disintegration
        for other_brick,other_supporting in supporting_bricks.items():
            if other_brick != brick and len(other_supporting) > 1:
                can_disintegrate.update(supporting.intersection(other_supporting))


    if not len(supported_bricks[brick]):
        can_disintegrate.add(brick)

#print(can_disintegrate)
print(len(can_disintegrate))

# any bricks that are supported by bricks who are supported by at least one other brick
# can_disintegrate2 = set()
# for brick,supporting in supporting_bricks.items(): # key is supported by value
#     for n_brick in supporting:
#         if len(supporting_bricks[n_brick]) > 1:
#             can_disintegrate2.add(brick)

#     if not len(supported_bricks[brick]):
#         can_disintegrate2.add(brick)


# print(can_disintegrate2)
# print(len(can_disintegrate2))

# print(can_disintegrate - can_disintegrate2)
# print(can_disintegrate2 - can_disintegrate)
# print(can_disintegrate2.intersection(can_disintegrate))
# 121 too low
# 429 too low
# 432 ***
# 440 too high

check = [(2, 8, 1, 3, 8, 1), (4, 3, 1, 5, 3, 1), (1, 1, 1, 1, 1, 3), (0, 3, 1, 0, 3, 2), (4, 6, 1, 4, 9, 1), (7, 3, 1, 9, 3, 1), (6, 0, 2, 6, 1, 2), (4, 5, 1, 5, 5, 1), (1, 6, 1, 1, 6, 4), (3, 4, 1, 3, 6, 1), (3, 2, 1, 3, 3, 1), (0, 2, 2, 1, 2, 2), (7, 4, 2, 7, 4, 3), (7, 0, 2, 7, 0, 3), (0, 7, 2, 0, 9, 2), (2, 6, 3, 2, 6, 4), (6, 7, 3, 8, 7, 3), (5, 1, 3, 9, 1, 3), (9, 6, 5, 9, 9, 5), (8, 4, 7, 8, 7, 7), (4, 6, 5, 7, 6, 5), (8, 2, 4, 8, 3, 4), (6, 9, 5, 8, 9, 5), (1, 4, 6, 3, 4, 6), (7, 7, 7, 7, 9, 7), (4, 0, 8, 6, 0, 8), (6, 4, 8, 8, 4, 8), (4, 8, 7, 6, 8, 7), (8, 1, 6, 8, 1, 8), (5, 5, 8, 5, 5, 10), (5, 9, 7, 6, 9, 7), (8, 3, 10, 8, 3, 12), (9, 3, 10, 9, 5, 10), (0, 5, 8, 2, 5, 8), (7, 1, 8, 7, 1, 9), (5, 2, 11, 7, 2, 11), (5, 8, 9, 8, 8, 9), (2, 7, 10, 3, 7, 10), (2, 1, 12, 2, 2, 12), (1, 0, 12, 2, 0, 12), (0, 3, 12, 0, 4, 12), (8, 4, 12, 8, 8, 12), (2, 6, 12, 4, 6, 12), (1, 4, 14, 1, 5, 14), (1, 6, 14, 1, 9, 14), (0, 8, 14, 0, 9, 14), (3, 4, 15, 3, 5, 15), (0, 3, 17, 0, 5, 17), (5, 9, 13, 5, 9, 15), (8, 0, 17, 9, 0, 17), (0, 0, 16, 0, 2, 16), (1, 8, 17, 4, 8, 17), (8, 9, 15, 8, 9, 17), (6, 3, 17, 8, 3, 17), (8, 1, 16, 8, 1, 16), (9, 6, 17, 9, 8, 17), (8, 7, 19, 9, 7, 19), (7, 5, 18, 7, 5, 21), (3, 2, 20, 4, 2, 20), (8, 4, 19, 8, 6, 19), (3, 6, 19, 5, 6, 19), (0, 1, 20, 3, 1, 20), (0, 5, 21, 1, 5, 21), (5, 8, 23, 6, 8, 23), (7, 3, 22, 9, 3, 22), (5, 0, 24, 5, 2, 24), (6, 0, 25, 8, 0, 25), (5, 1, 26, 5, 2, 26), (4, 3, 25, 6, 3, 25), (8, 6, 25, 8, 7, 25), (4, 4, 25, 4, 7, 25), (7, 4, 25, 7, 6, 25), (6, 7, 26, 6, 8, 26), (4, 3, 26, 4, 5, 26), (5, 1, 27, 8, 1, 27), (0, 0, 27, 1, 0, 27), (5, 7, 27, 5, 7, 30), (4, 9, 27, 6, 9, 27), (5, 4, 26, 7, 4, 26), (7, 8, 28, 7, 8, 29), (0, 1, 29, 1, 1, 29), (6, 0, 30, 6, 0, 32), (1, 9, 30, 3, 9, 30), (6, 4, 28, 6, 5, 28), (5, 1, 31, 5, 2, 31), (6, 1, 31, 9, 1, 31), (8, 3, 28, 8, 6, 28), (9, 4, 31, 9, 6, 31), (2, 7, 31, 2, 7, 31), (5, 6, 32, 5, 6, 33), (5, 7, 32, 5, 8, 32), (7, 2, 32, 7, 4, 32), (2, 8, 32, 3, 8, 32), (2, 9, 32, 4, 9, 32), (4, 6, 32, 4, 7, 32), (1, 5, 33, 1, 6, 33), (0, 3, 33, 1, 3, 33), (8, 6, 36, 8, 7, 36), (3, 7, 35, 5, 7, 35), (3, 1, 34, 3, 1, 36), (5, 7, 38, 5, 8, 38), (0, 5, 36, 1, 5, 36), (7, 6, 38, 7, 8, 38), (4, 1, 34, 5, 1, 34), (1, 1, 35, 2, 1, 35), (7, 0, 36, 7, 3, 36), (9, 2, 37, 9, 5, 37), (2, 5, 38, 3, 5, 38), (4, 1, 36, 4, 1, 38), (0, 4, 38, 3, 4, 38), (2, 0, 36, 4, 0, 36), (6, 2, 37, 6, 5, 37), (5, 1, 37, 8, 1, 37), (6, 5, 38, 6, 8, 38), (4, 2, 37, 5, 2, 37), (3, 9, 41, 5, 9, 41), (5, 8, 39, 8, 8, 39), (0, 7, 43, 1, 7, 43), (6, 7, 39, 8, 7, 39), (8, 0, 41, 8, 3, 41), (2, 3, 40, 3, 3, 40), (6, 5, 43, 6, 7, 43), (8, 4, 42, 8, 6, 42), (3, 7, 41, 4, 7, 41), (5, 6, 43, 5, 8, 43), (0, 4, 43, 0, 5, 43), (9, 1, 42, 9, 4, 42), (1, 7, 46, 1, 8, 46), (5, 1, 42, 5, 2, 42), (7, 3, 43, 8, 3, 43), (4, 3, 43, 4, 3, 46), (6, 4, 43, 8, 4, 43), (7, 5, 45, 7, 7, 45), (0, 0, 49, 2, 0, 49), (9, 2, 47, 9, 4, 47), (5, 4, 47, 5, 6, 47), (2, 3, 48, 3, 3, 48), (6, 5, 47, 9, 5, 47), (2, 1, 48, 2, 2, 48), (1, 2, 50, 1, 4, 50), (2, 8, 49, 4, 8, 49), (7, 0, 46, 9, 0, 46), (1, 7, 50, 2, 7, 50), (9, 7, 48, 9, 9, 48), (9, 4, 49, 9, 5, 49), (3, 4, 50, 3, 6, 50), (4, 7, 50, 4, 8, 50), (0, 4, 51, 0, 6, 51), (7, 9, 50, 8, 9, 50), (3, 9, 50, 4, 9, 50), (7, 3, 50, 7, 5, 50), (0, 9, 53, 0, 9, 54), (6, 6, 50, 9, 6, 50), (1, 6, 52, 3, 6, 52), (6, 7, 50, 8, 7, 50), (5, 7, 50, 5, 9, 50), (6, 0, 54, 6, 3, 54), (7, 5, 52, 7, 7, 52), (5, 0, 54, 5, 2, 54), (3, 2, 54, 3, 4, 54), (5, 2, 55, 8, 2, 55), (1, 2, 55, 1, 2, 57), (5, 9, 53, 8, 9, 53), (4, 5, 57, 4, 5, 59), (8, 4, 54, 9, 4, 54), (3, 2, 58, 5, 2, 58), (9, 7, 54, 9, 9, 54), (6, 1, 58, 6, 3, 58), (5, 1, 58, 5, 1, 58), (3, 6, 57, 3, 7, 57), (2, 8, 58, 4, 8, 58), (6, 3, 60, 7, 3, 60), (1, 1, 59, 1, 1, 60), (8, 1, 61, 8, 3, 61), (2, 5, 58, 2, 5, 61), (2, 6, 58, 2, 7, 58), (1, 9, 59, 3, 9, 59), (0, 8, 60, 0, 9, 60), (8, 5, 60, 8, 8, 60), (6, 6, 62, 6, 8, 62), (3, 3, 61, 3, 3, 61), (4, 9, 63, 7, 9, 63), (0, 5, 62, 0, 7, 62), (3, 3, 62, 3, 5, 62), (2, 1, 61, 5, 1, 61), (2, 1, 62, 2, 3, 62), (2, 8, 66, 4, 8, 66), (1, 3, 63, 1, 4, 63), (1, 8, 66, 1, 8, 69), (0, 1, 62, 0, 1, 64), (1, 6, 66, 1, 6, 68), (5, 0, 64, 5, 2, 64), (1, 1, 66, 1, 4, 66), (2, 0, 66, 4, 0, 66), (7, 3, 64, 7, 3, 65), (0, 5, 65, 0, 7, 65), (4, 7, 65, 5, 7, 65), (5, 4, 66, 5, 4, 69), (7, 0, 65, 7, 0, 66), (3, 6, 66, 3, 6, 69), (8, 2, 66, 8, 4, 66), (4, 6, 66, 4, 7, 66), (9, 1, 68, 9, 3, 68), (6, 4, 68, 6, 5, 68), (4, 1, 69, 6, 1, 69), (9, 6, 69, 9, 8, 69), (9, 4, 68, 9, 5, 68), (8, 6, 69, 8, 7, 69), (5, 2, 71, 5, 4, 71), (4, 2, 71, 4, 4, 71), (7, 0, 71, 7, 2, 71), (6, 9, 69, 6, 9, 71), (5, 7, 70, 7, 7, 70), (8, 0, 71, 8, 2, 71), (1, 9, 70, 2, 9, 70), (2, 4, 72, 2, 4, 72), (5, 8, 73, 7, 8, 73), (6, 6, 73, 8, 6, 73), (5, 6, 71, 5, 6, 74), (3, 1, 73, 3, 3, 73), (4, 1, 73, 6, 1, 73), (2, 1, 75, 4, 1, 75), (7, 0, 75, 7, 1, 75), (3, 6, 74, 3, 7, 74), (2, 3, 76, 5, 3, 76), (2, 2, 77, 3, 2, 77), (1, 0, 75, 1, 2, 75), (6, 5, 79, 6, 8, 79), (2, 4, 77, 2, 4, 78), (4, 1, 78, 6, 1, 78), (0, 0, 76, 0, 2, 76), (3, 8, 80, 4, 8, 80), (5, 8, 80, 5, 9, 80), (8, 5, 84, 8, 8, 84), (4, 0, 80, 4, 0, 81), (9, 6, 84, 9, 8, 84), (4, 6, 82, 4, 7, 82), (2, 0, 80, 3, 0, 80), (5, 0, 80, 7, 0, 80), (4, 4, 83, 6, 4, 83), (1, 8, 82, 3, 8, 82), (8, 7, 85, 9, 7, 85), (1, 3, 81, 4, 3, 81), (3, 9, 82, 5, 9, 82), (1, 4, 82, 3, 4, 82), (4, 5, 82, 5, 5, 82), (8, 0, 83, 8, 1, 83), (0, 7, 83, 0, 8, 83), (0, 0, 83, 1, 0, 83), (9, 6, 87, 9, 6, 89), (3, 2, 83, 3, 2, 83), (1, 5, 84, 1, 5, 85), (5, 3, 88, 5, 3, 89), (7, 7, 87, 7, 9, 87), (6, 2, 89, 6, 2, 90), (2, 3, 86, 2, 3, 87), (9, 0, 90, 9, 2, 90), (1, 6, 84, 1, 7, 84), (7, 5, 89, 9, 5, 89), (7, 6, 90, 7, 6, 92), (6, 6, 90, 6, 6, 92), (8, 1, 91, 8, 3, 91), (3, 1, 88, 3, 3, 88), (2, 5, 88, 3, 5, 88), (7, 0, 92, 7, 1, 92), (4, 6, 94, 4, 6, 96), (1, 4, 89, 1, 6, 89), (4, 8, 96, 4, 8, 97), (8, 6, 92, 8, 6, 94), (6, 3, 93, 6, 4, 93), (1, 6, 95, 1, 8, 95), (0, 2, 90, 1, 2, 90), (2, 3, 92, 2, 3, 92), (7, 9, 92, 9, 9, 92), (1, 3, 92, 1, 5, 92), (6, 0, 94, 7, 0, 94), (7, 5, 94, 9, 5, 94), (3, 9, 100, 3, 9, 102), (2, 6, 95, 2, 8, 95), (5, 0, 92, 5, 1, 92), (1, 7, 96, 2, 7, 96), (0, 1, 92, 2, 1, 92), (7, 2, 95, 7, 3, 95), (7, 7, 96, 7, 9, 96), (7, 4, 95, 8, 4, 95), (6, 8, 97, 6, 8, 99), (1, 7, 98, 1, 9, 98), (5, 6, 99, 5, 6, 100), (4, 9, 97, 6, 9, 97), (0, 9, 93, 0, 9, 96), (4, 2, 97, 5, 2, 97), (0, 7, 94, 0, 8, 94), (2, 0, 96, 2, 2, 96), (7, 0, 98, 9, 0, 98), (7, 4, 98, 7, 4, 98), (1, 4, 97, 1, 5, 97), (6, 1, 99, 6, 3, 99), (7, 5, 100, 7, 5, 101), (5, 2, 100, 7, 2, 100), (5, 5, 101, 6, 5, 101), (3, 1, 98, 4, 1, 98), (6, 9, 103, 7, 9, 103), (3, 8, 103, 5, 8, 103), (6, 3, 102, 6, 4, 102), (3, 4, 103, 3, 5, 103), (0, 2, 101, 0, 4, 101), (0, 0, 103, 2, 0, 103), (1, 4, 105, 1, 5, 105), (9, 3, 104, 9, 3, 106), (3, 2, 106, 4, 2, 106), (2, 3, 105, 3, 3, 105), (9, 5, 105, 9, 6, 105), (8, 4, 104, 8, 6, 104), (5, 5, 105, 5, 5, 107), (6, 4, 105, 7, 4, 105), (2, 0, 109, 4, 0, 109), (7, 5, 105, 7, 7, 105), (5, 1, 107, 5, 4, 107), (8, 0, 107, 8, 1, 107), (3, 1, 109, 3, 2, 109), (5, 7, 107, 5, 7, 109), (0, 9, 109, 2, 9, 109), (8, 1, 114, 9, 1, 114), (7, 3, 110, 7, 4, 110), (5, 1, 113, 5, 3, 113), (7, 6, 108, 7, 8, 108), (6, 2, 114, 8, 2, 114), (2, 4, 112, 4, 4, 112), (9, 6, 108, 9, 7, 108), (8, 4, 114, 9, 4, 114), (4, 1, 114, 4, 3, 114), (3, 3, 112, 3, 3, 112), (3, 8, 113, 3, 8, 114), (4, 9, 111, 7, 9, 111), (2, 5, 113, 2, 7, 113), (5, 4, 114, 7, 4, 114), (2, 1, 115, 4, 1, 115), (3, 0, 114, 4, 0, 114), (1, 7, 114, 1, 8, 114), (0, 1, 116, 0, 4, 116), (7, 5, 115, 7, 5, 118), (4, 0, 115, 6, 0, 115), (2, 0, 115, 2, 0, 115), (3, 4, 116, 6, 4, 116), (9, 7, 111, 9, 9, 111), (7, 0, 116, 7, 0, 118), (8, 6, 111, 8, 8, 111), (1, 7, 116, 3, 7, 116), (3, 5, 116, 5, 5, 116), (7, 7, 118, 7, 9, 118), (4, 7, 117, 4, 9, 117), (5, 1, 118, 5, 1, 121), (7, 2, 119, 7, 5, 119), (2, 4, 118, 2, 4, 122), (1, 5, 118, 2, 5, 118), (1, 9, 117, 3, 9, 117), (6, 2, 120, 6, 2, 124), (8, 2, 119, 8, 5, 119), (4, 8, 118, 5, 8, 118), (6, 6, 119, 6, 6, 121), (3, 1, 121, 3, 1, 123), (6, 5, 120, 8, 5, 120), (2, 7, 120, 4, 7, 120), (0, 5, 119, 0, 7, 119), (4, 9, 119, 4, 9, 121), (4, 5, 121, 6, 5, 121), (4, 6, 121, 4, 7, 121), (1, 3, 119, 4, 3, 119), (4, 4, 121, 4, 4, 122), (6, 9, 120, 8, 9, 120), (1, 6, 122, 1, 6, 122), (5, 7, 120, 7, 7, 120), (1, 8, 123, 2, 8, 123), (3, 3, 125, 3, 5, 125), (0, 2, 122, 2, 2, 122), (2, 6, 125, 5, 6, 125), (0, 9, 124, 0, 9, 126), (1, 9, 125, 1, 9, 125), (9, 4, 125, 9, 5, 125), (9, 7, 128, 9, 9, 128), (6, 7, 126, 8, 7, 126), (2, 5, 128, 2, 7, 128), (3, 9, 128, 3, 9, 130), (4, 6, 128, 5, 6, 128), (7, 2, 126, 7, 4, 126), (6, 8, 129, 7, 8, 129), (1, 8, 127, 2, 8, 127), (7, 0, 126, 7, 0, 129), (9, 2, 129, 9, 5, 129), (6, 1, 127, 8, 1, 127), (4, 0, 128, 6, 0, 128), (4, 2, 128, 6, 2, 128), (4, 1, 128, 4, 1, 129), (6, 5, 130, 6, 7, 130), (2, 2, 130, 2, 3, 130), (6, 4, 129, 6, 4, 129), (7, 2, 132, 9, 2, 132), (1, 0, 132, 1, 0, 134), (2, 5, 131, 4, 5, 131), (0, 3, 132, 1, 3, 132), (6, 2, 133, 6, 2, 134), (5, 1, 131, 5, 2, 131), (2, 5, 132, 2, 7, 132), (7, 5, 134, 7, 6, 134), (6, 1, 135, 7, 1, 135), (4, 5, 133, 4, 5, 135), (0, 0, 132, 0, 1, 132), (5, 1, 135, 5, 3, 135), (3, 6, 133, 3, 6, 135), (8, 3, 136, 8, 3, 138), (9, 5, 136, 9, 7, 136), (5, 3, 136, 6, 3, 136), (0, 1, 133, 0, 4, 133), (3, 4, 134, 3, 5, 134), (1, 5, 135, 3, 5, 135), (1, 1, 135, 1, 4, 135), (3, 1, 135, 4, 1, 135), (5, 0, 137, 5, 1, 137), (7, 0, 137, 7, 2, 137), (3, 3, 137, 3, 5, 137), (5, 4, 138, 5, 6, 138), (4, 3, 138, 4, 4, 138), (7, 2, 139, 7, 3, 139), (9, 7, 139, 9, 9, 139), (6, 6, 139, 6, 7, 139), (5, 5, 140, 5, 6, 140), (3, 7, 141, 3, 9, 141), (4, 6, 141, 4, 9, 141), (3, 9, 142, 5, 9, 142), (5, 8, 142, 6, 8, 142), (1, 5, 141, 1, 8, 141), (2, 8, 142, 2, 9, 142)]
checked = set(can_disintegrate)
for brick in check:
    i,j,k = brick[0],brick[1],brick[2]
    x,y,z = brick[3],brick[4],brick[5]
    for id,my_brick in settled_bricks.items():
        if (i,j,k) in my_brick or (x,y,z) in my_brick:
            if id in checked:
                checked.remove(id)

print(checked)
print(checked - can_disintegrate)
print(len(checked), len(check))
print(can_disintegrate - checked)

fall = {2: (2, 8, 1, 3, 8, 1), 4: (4, 3, 1, 5, 3, 1), 5: (1, 1, 1, 1, 1, 3), 6: (0, 3, 1, 0, 3, 2), 8: (4, 6, 1, 4, 9, 1), 10: (7, 3, 1, 9, 3, 1), 14: (6, 0, 2, 6, 1, 2), 16: (4, 5, 1, 5, 5, 1), 17: (1, 6, 1, 1, 6, 4), 18: (3, 4, 1, 3, 6, 1), 20: (3, 2, 1, 3, 3, 1), 21: (0, 2, 2, 1, 2, 2), 23: (7, 4, 2, 7, 4, 3), 26: (7, 0, 2, 7, 0, 3), 27: (0, 7, 2, 0, 9, 2), 28: (2, 6, 3, 2, 6, 4), 30: (6, 7, 3, 8, 7, 3), 36: (5, 1, 3, 9, 1, 3), 37: (9, 6, 5, 9, 9, 5), 43: (8, 4, 7, 8, 7, 7), 44: (4, 6, 5, 7, 6, 5), 55: (8, 2, 4, 8, 3, 4), 58: (6, 9, 5, 8, 9, 5), 60: (1, 4, 6, 3, 4, 6), 66: (7, 7, 7, 7, 9, 7), 69: (4, 0, 8, 6, 0, 8), 70: (6, 4, 8, 8, 4, 8), 74: (4, 8, 7, 6, 8, 7), 75: (8, 1, 6, 8, 1, 8), 76: (5, 5, 8, 5, 5, 10), 80: (5, 9, 7, 6, 9, 7), 81: (8, 3, 10, 8, 3, 12), 84: (9, 3, 10, 9, 5, 10), 86: (0, 5, 8, 2, 5, 8), 87: (7, 1, 8, 7, 1, 9), 96: (5, 2, 11, 7, 2, 11), 98: (5, 8, 9, 8, 8, 9), 103: (2, 7, 10, 3, 7, 10), 110: (2, 1, 12, 2, 2, 12), 113: (1, 0, 12, 2, 0, 12), 116: (0, 3, 12, 0, 4, 12), 117: (8, 4, 12, 8, 8, 12), 121: (2, 6, 12, 4, 6, 12), 125: (1, 4, 14, 1, 5, 14), 128: (1, 6, 14, 1, 9, 14), 134: (0, 8, 14, 0, 9, 14), 136: (3, 4, 15, 3, 5, 15), 138: (0, 3, 17, 0, 5, 17), 140: (5, 9, 13, 5, 9, 15), 148: (8, 0, 17, 9, 0, 17), 149: (0, 0, 16, 0, 2, 16), 151: (1, 8, 17, 4, 8, 17), 152: (8, 9, 15, 8, 9, 17), 153: (6, 3, 17, 8, 3, 17), 155: (8, 1, 16, 8, 1, 16), 161: (9, 6, 17, 9, 8, 17), 166: (8, 7, 19, 9, 7, 19), 168: (7, 5, 18, 7, 5, 21), 169: (3, 2, 20, 4, 2, 20), 170: (8, 4, 19, 8, 6, 19), 171: (3, 6, 19, 5, 6, 19), 175: (0, 1, 20, 3, 1, 20), 179: (0, 5, 21, 1, 5, 21), 185: (5, 8, 23, 6, 8, 23), 187: (7, 3, 22, 9, 3, 22), 189: (5, 0, 24, 5, 2, 24), 193: (6, 0, 25, 8, 0, 25), 201: (5, 1, 26, 5, 2, 26), 204: (4, 3, 25, 6, 3, 25), 206: (8, 6, 25, 8, 7, 25), 212: (4, 4, 25, 4, 7, 25), 214: (7, 4, 25, 7, 6, 25), 215: (6, 7, 26, 6, 8, 26), 216: (4, 3, 26, 4, 5, 26), 219: (5, 1, 27, 8, 1, 27), 222: (0, 0, 27, 1, 0, 27), 225: (5, 7, 27, 5, 7, 30), 226: (4, 9, 27, 6, 9, 27), 227: (5, 4, 26, 7, 4, 26), 233: (7, 8, 28, 7, 8, 29), 236: (0, 1, 29, 1, 1, 29), 243: (6, 0, 30, 6, 0, 32), 246: (1, 9, 30, 3, 9, 30), 247: (6, 4, 28, 6, 5, 28), 249: (5, 1, 31, 5, 2, 31), 250: (6, 1, 31, 9, 1, 31), 251: (8, 3, 28, 8, 6, 28), 253: (9, 4, 31, 9, 6, 31), 259: (2, 7, 31, 2, 7, 31), 262: (5, 6, 32, 5, 6, 33), 264: (5, 7, 32, 5, 8, 32), 266: (7, 2, 32, 7, 4, 32), 268: (2, 8, 32, 3, 8, 32), 269: (2, 9, 32, 4, 9, 32), 271: (4, 6, 32, 4, 7, 32), 273: (1, 5, 33, 1, 6, 33), 289: (0, 3, 33, 1, 3, 33), 295: (8, 6, 36, 8, 7, 36), 296: (3, 7, 35, 5, 7, 35), 299: (3, 1, 34, 3, 1, 36), 300: (5, 7, 38, 5, 8, 38), 303: (0, 5, 36, 1, 5, 36), 305: (7, 6, 38, 7, 8, 38), 306: (4, 1, 34, 5, 1, 34), 307: (1, 1, 35, 2, 1, 35), 310: (7, 0, 36, 7, 3, 36), 311: (9, 2, 37, 9, 5, 37), 312: (2, 5, 38, 3, 5, 38), 316: (4, 1, 36, 4, 1, 38), 320: (0, 4, 38, 3, 4, 38), 321: (2, 0, 36, 4, 0, 36), 323: (6, 2, 37, 6, 5, 37), 326: (5, 1, 37, 8, 1, 37), 328: (6, 5, 38, 6, 8, 38), 331: (4, 2, 37, 5, 2, 37), 334: (3, 9, 41, 5, 9, 41), 335: (5, 8, 39, 8, 8, 39), 337: (0, 7, 43, 1, 7, 43), 343: (6, 7, 39, 8, 7, 39), 350: (8, 0, 41, 8, 3, 41), 354: (2, 3, 40, 3, 3, 40), 359: (6, 5, 43, 6, 7, 43), 361: (8, 4, 42, 8, 6, 42), 365: (3, 7, 41, 4, 7, 41), 367: (5, 6, 43, 5, 8, 43), 368: (0, 4, 43, 0, 5, 43), 371: (9, 1, 42, 9, 4, 42), 372: (1, 7, 46, 1, 8, 46), 375: (5, 1, 42, 5, 2, 42), 376: (7, 3, 43, 8, 3, 43), 378: (4, 3, 43, 4, 3, 46), 381: (6, 4, 43, 8, 4, 43), 391: (7, 5, 45, 7, 7, 45), 400: (0, 0, 49, 2, 0, 49), 406: (9, 2, 47, 9, 4, 47), 407: (5, 4, 47, 5, 6, 47), 408: (2, 3, 48, 3, 3, 48), 410: (6, 5, 47, 9, 5, 47), 417: (2, 1, 48, 2, 2, 48), 424: (1, 2, 50, 1, 4, 50), 426: (2, 8, 49, 4, 8, 49), 427: (7, 0, 46, 9, 0, 46), 428: (1, 7, 50, 2, 7, 50), 430: (9, 7, 48, 9, 9, 48), 431: (9, 4, 49, 9, 5, 49), 432: (3, 4, 50, 3, 6, 50), 435: (4, 7, 50, 4, 8, 50), 438: (0, 4, 51, 0, 6, 51), 442: (7, 9, 50, 8, 9, 50), 443: (3, 9, 50, 4, 9, 50), 444: (7, 3, 50, 7, 5, 50), 445: (0, 9, 53, 0, 9, 54), 448: (6, 6, 50, 9, 6, 50), 449: (1, 6, 52, 3, 6, 52), 450: (6, 7, 50, 8, 7, 50), 451: (5, 7, 50, 5, 9, 50), 459: (6, 0, 54, 6, 3, 54), 463: (7, 5, 52, 7, 7, 52), 464: (5, 0, 54, 5, 2, 54), 467: (3, 2, 54, 3, 4, 54), 472: (5, 2, 55, 8, 2, 55), 473: (1, 2, 55, 1, 2, 57), 478: (5, 9, 53, 8, 9, 53), 483: (4, 5, 57, 4, 5, 59), 484: (8, 4, 54, 9, 4, 54), 486: (3, 2, 58, 5, 2, 58), 487: (9, 7, 54, 9, 9, 54), 488: (6, 1, 58, 6, 3, 58), 489: (5, 1, 58, 5, 1, 58), 496: (3, 6, 57, 3, 7, 57), 497: (2, 8, 58, 4, 8, 58), 499: (6, 3, 60, 7, 3, 60), 506: (1, 1, 59, 1, 1, 60), 507: (8, 1, 61, 8, 3, 61), 509: (2, 5, 58, 2, 5, 61), 510: (2, 6, 58, 2, 7, 58), 512: (1, 9, 59, 3, 9, 59), 518: (0, 8, 60, 0, 9, 60), 519: (8, 5, 60, 8, 8, 60), 534: (6, 6, 62, 6, 8, 62), 536: (3, 3, 61, 3, 3, 61), 539: (4, 9, 63, 7, 9, 63), 540: (0, 5, 62, 0, 7, 62), 541: (3, 3, 62, 3, 5, 62), 543: (2, 1, 61, 5, 1, 61), 551: (2, 1, 62, 2, 3, 62), 554: (2, 8, 66, 4, 8, 66), 556: (1, 3, 63, 1, 4, 63), 559: (1, 8, 66, 1, 8, 69), 563: (0, 1, 62, 0, 1, 64), 564: (1, 6, 66, 1, 6, 68), 565: (5, 0, 64, 5, 2, 64), 567: (1, 1, 66, 1, 4, 66), 573: (2, 0, 66, 4, 0, 66), 574: (7, 3, 64, 7, 3, 65), 576: (0, 5, 65, 0, 7, 65), 577: (4, 7, 65, 5, 7, 65), 584: (5, 4, 66, 5, 4, 69), 586: (7, 0, 65, 7, 0, 66), 587: (3, 6, 66, 3, 6, 69), 590: (8, 2, 66, 8, 4, 66), 591: (4, 6, 66, 4, 7, 66), 596: (9, 1, 68, 9, 3, 68), 598: (6, 4, 68, 6, 5, 68), 600: (4, 1, 69, 6, 1, 69), 601: (9, 6, 69, 9, 8, 69), 603: (9, 4, 68, 9, 5, 68), 607: (8, 6, 69, 8, 7, 69), 613: (5, 2, 71, 5, 4, 71), 616: (4, 2, 71, 4, 4, 71), 619: (7, 0, 71, 7, 2, 71), 620: (6, 9, 69, 6, 9, 71), 622: (5, 7, 70, 7, 7, 70), 623: (8, 0, 71, 8, 2, 71), 630: (1, 9, 70, 2, 9, 70), 635: (2, 4, 72, 2, 4, 72), 636: (5, 8, 73, 7, 8, 73), 637: (6, 6, 73, 8, 6, 73), 640: (5, 6, 71, 5, 6, 74), 646: (3, 1, 73, 3, 3, 73), 647: (4, 1, 73, 6, 1, 73), 654: (2, 1, 75, 4, 1, 75), 655: (7, 0, 75, 7, 1, 75), 656: (3, 6, 74, 3, 7, 74), 671: (2, 3, 76, 5, 3, 76), 672: (2, 2, 77, 3, 2, 77), 673: (1, 0, 75, 1, 2, 75), 678: (6, 5, 79, 6, 8, 79), 681: (2, 4, 77, 2, 4, 78), 684: (4, 1, 78, 6, 1, 78), 685: (0, 0, 76, 0, 2, 76), 690: (3, 8, 80, 4, 8, 80), 692: (5, 8, 80, 5, 9, 80), 700: (8, 5, 84, 8, 8, 84), 701: (4, 0, 80, 4, 0, 81), 703: (9, 6, 84, 9, 8, 84), 704: (4, 6, 82, 4, 7, 82), 705: (2, 0, 80, 3, 0, 80), 706: (5, 0, 80, 7, 0, 80), 708: (4, 4, 83, 6, 4, 83), 710: (1, 8, 82, 3, 8, 82), 712: (8, 7, 85, 9, 7, 85), 714: (1, 3, 81, 4, 3, 81), 715: (3, 9, 82, 5, 9, 82), 716: (1, 4, 82, 3, 4, 82), 718: (4, 5, 82, 5, 5, 82), 733: (8, 0, 83, 8, 1, 83), 734: (0, 7, 83, 0, 8, 83), 736: (0, 0, 83, 1, 0, 83), 740: (9, 6, 87, 9, 6, 89), 743: (3, 2, 83, 3, 2, 83), 744: (1, 5, 84, 1, 5, 85), 746: (5, 3, 88, 5, 3, 89), 747: (7, 7, 87, 7, 9, 87), 750: (6, 2, 89, 6, 2, 90), 751: (2, 3, 86, 2, 3, 87), 753: (9, 0, 90, 9, 2, 90), 755: (1, 6, 84, 1, 7, 84), 759: (7, 5, 89, 9, 5, 89), 766: (7, 6, 90, 7, 6, 92), 769: (6, 6, 90, 6, 6, 92), 775: (8, 1, 91, 8, 3, 91), 777: (3, 1, 88, 3, 3, 88), 778: (2, 5, 88, 3, 5, 88), 780: (7, 0, 92, 7, 1, 92), 782: (4, 6, 94, 4, 6, 96), 789: (1, 4, 89, 1, 6, 89), 796: (4, 8, 96, 4, 8, 97), 798: (8, 6, 92, 8, 6, 94), 799: (6, 3, 93, 6, 4, 93), 801: (1, 6, 95, 1, 8, 95), 806: (0, 2, 90, 1, 2, 90), 807: (2, 3, 92, 2, 3, 92), 811: (7, 9, 92, 9, 9, 92), 812: (1, 3, 92, 1, 5, 92), 813: (6, 0, 94, 7, 0, 94), 815: (7, 5, 94, 9, 5, 94), 817: (3, 9, 100, 3, 9, 102), 818: (2, 6, 95, 2, 8, 95), 822: (5, 0, 92, 5, 1, 92), 823: (1, 7, 96, 2, 7, 96), 826: (0, 1, 92, 2, 1, 92), 831: (7, 2, 95, 7, 3, 95), 832: (7, 7, 96, 7, 9, 96), 833: (7, 4, 95, 8, 4, 95), 840: (6, 8, 97, 6, 8, 99), 847: (1, 7, 98, 1, 9, 98), 848: (5, 6, 99, 5, 6, 100), 849: (4, 9, 97, 6, 9, 97), 850: (0, 9, 93, 0, 9, 96), 852: (4, 2, 97, 5, 2, 97), 853: (0, 7, 94, 0, 8, 94), 859: (2, 0, 96, 2, 2, 96), 860: (7, 0, 98, 9, 0, 98), 864: (7, 4, 98, 7, 4, 98), 867: (1, 4, 97, 1, 5, 97), 873: (6, 1, 99, 6, 3, 99), 877: (7, 5, 100, 7, 5, 101), 882: (5, 2, 100, 7, 2, 100), 885: (5, 5, 101, 6, 5, 101), 886: (3, 1, 98, 4, 1, 98), 889: (6, 9, 103, 7, 9, 103), 901: (3, 8, 103, 5, 8, 103), 910: (6, 3, 102, 6, 4, 102), 913: (3, 4, 103, 3, 5, 103), 914: (0, 2, 101, 0, 4, 101), 916: (0, 0, 103, 2, 0, 103), 919: (1, 4, 105, 1, 5, 105), 922: (9, 3, 104, 9, 3, 106), 924: (3, 2, 106, 4, 2, 106), 925: (2, 3, 105, 3, 3, 105), 926: (9, 5, 105, 9, 6, 105), 928: (8, 4, 104, 8, 6, 104), 938: (5, 5, 105, 5, 5, 107), 942: (6, 4, 105, 7, 4, 105), 944: (2, 0, 109, 4, 0, 109), 947: (7, 5, 105, 7, 7, 105), 953: (5, 1, 107, 5, 4, 107), 957: (8, 0, 107, 8, 1, 107), 960: (3, 1, 109, 3, 2, 109), 963: (5, 7, 107, 5, 7, 109), 971: (0, 9, 109, 2, 9, 109), 976: (8, 1, 114, 9, 1, 114), 978: (7, 3, 110, 7, 4, 110), 980: (5, 1, 113, 5, 3, 113), 983: (7, 6, 108, 7, 8, 108), 984: (6, 2, 114, 8, 2, 114), 985: (2, 4, 112, 4, 4, 112), 989: (9, 6, 108, 9, 7, 108), 992: (8, 4, 114, 9, 4, 114), 993: (4, 1, 114, 4, 3, 114), 995: (3, 3, 112, 3, 3, 112), 1000: (3, 8, 113, 3, 8, 114), 1002: (4, 9, 111, 7, 9, 111), 1004: (2, 5, 113, 2, 7, 113), 1005: (5, 4, 114, 7, 4, 114), 1009: (2, 1, 115, 4, 1, 115), 1011: (3, 0, 114, 4, 0, 114), 1018: (1, 7, 114, 1, 8, 114), 1023: (0, 1, 116, 0, 4, 116), 1025: (7, 5, 115, 7, 5, 118), 1026: (4, 0, 115, 6, 0, 115), 1027: (2, 0, 115, 2, 0, 115), 1029: (3, 4, 116, 6, 4, 116), 1030: (9, 7, 111, 9, 9, 111), 1031: (7, 0, 116, 7, 0, 118), 1033: (8, 6, 111, 8, 8, 111), 1043: (1, 7, 116, 3, 7, 116), 1044: (3, 5, 116, 5, 5, 116), 1049: (7, 7, 118, 7, 9, 118), 1053: (4, 7, 117, 4, 9, 117), 1054: (5, 1, 118, 5, 1, 121), 1056: (7, 2, 119, 7, 5, 119), 1057: (2, 4, 118, 2, 4, 122), 1058: (1, 5, 118, 2, 5, 118), 1059: (1, 9, 117, 3, 9, 117), 1060: (6, 2, 120, 6, 2, 124), 1064: (8, 2, 119, 8, 5, 119), 1069: (4, 8, 118, 5, 8, 118), 1070: (6, 6, 119, 6, 6, 121), 1071: (3, 1, 121, 3, 1, 123), 1072: (6, 5, 120, 8, 5, 120), 1074: (2, 7, 120, 4, 7, 120), 1077: (0, 5, 119, 0, 7, 119), 1078: (4, 9, 119, 4, 9, 121), 1081: (4, 5, 121, 6, 5, 121), 1083: (4, 6, 121, 4, 7, 121), 1084: (1, 3, 119, 4, 3, 119), 1086: (4, 4, 121, 4, 4, 122), 1087: (6, 9, 120, 8, 9, 120), 1089: (1, 6, 122, 1, 6, 122), 1090: (5, 7, 120, 7, 7, 120), 1099: (1, 8, 123, 2, 8, 123), 1101: (3, 3, 125, 3, 5, 125), 1104: (0, 2, 122, 2, 2, 122), 1105: (2, 6, 125, 5, 6, 125), 1108: (0, 9, 124, 0, 9, 126), 1111: (1, 9, 125, 1, 9, 125), 1120: (9, 4, 125, 9, 5, 125), 1123: (9, 7, 128, 9, 9, 128), 1128: (6, 7, 126, 8, 7, 126), 1129: (2, 5, 128, 2, 7, 128), 1131: (3, 9, 128, 3, 9, 130), 1133: (4, 6, 128, 5, 6, 128), 1134: (7, 2, 126, 7, 4, 126), 1135: (6, 8, 129, 7, 8, 129), 1140: (1, 8, 127, 2, 8, 127), 1141: (7, 0, 126, 7, 0, 129), 1145: (9, 2, 129, 9, 5, 129), 1148: (6, 1, 127, 8, 1, 127), 1150: (4, 0, 128, 6, 0, 128), 1154: (4, 2, 128, 6, 2, 128), 1156: (4, 1, 128, 4, 1, 129), 1157: (6, 5, 130, 6, 7, 130), 1162: (2, 2, 130, 2, 3, 130), 1165: (6, 4, 129, 6, 4, 129), 1171: (7, 2, 132, 9, 2, 132), 1172: (1, 0, 132, 1, 0, 134), 1176: (2, 5, 131, 4, 5, 131), 1178: (0, 3, 132, 1, 3, 132), 1179: (6, 2, 133, 6, 2, 134), 1182: (5, 1, 131, 5, 2, 131), 1185: (2, 5, 132, 2, 7, 132), 1193: (7, 5, 134, 7, 6, 134), 1194: (6, 1, 135, 7, 1, 135), 1195: (4, 5, 133, 4, 5, 135), 1197: (0, 0, 132, 0, 1, 132), 1198: (5, 1, 135, 5, 3, 135), 1200: (3, 6, 133, 3, 6, 135), 1201: (8, 3, 136, 8, 3, 138), 1203: (9, 5, 136, 9, 7, 136), 1206: (5, 3, 136, 6, 3, 136), 1207: (0, 1, 133, 0, 4, 133), 1209: (3, 4, 134, 3, 5, 134), 1212: (1, 5, 135, 3, 5, 135), 1214: (1, 1, 135, 1, 4, 135), 1215: (3, 1, 135, 4, 1, 135), 1216: (5, 0, 137, 5, 1, 137), 1220: (7, 0, 137, 7, 2, 137), 1222: (3, 3, 137, 3, 5, 137), 1226: (5, 4, 138, 5, 6, 138), 1228: (4, 3, 138, 4, 4, 138), 1229: (7, 2, 139, 7, 3, 139), 1233: (9, 7, 139, 9, 9, 139), 1236: (6, 6, 139, 6, 7, 139), 1238: (5, 5, 140, 5, 6, 140), 1240: (3, 7, 141, 3, 9, 141), 1243: (4, 6, 141, 4, 9, 141), 1244: (3, 9, 142, 5, 9, 142), 1245: (5, 8, 142, 6, 8, 142), 1247: (1, 5, 141, 1, 8, 141), 1248: (2, 8, 142, 2, 9, 142)}
help = []
for key,brick in fall.items():
    i,j,k = brick[0],brick[1],brick[2]
    x,y,z = brick[3],brick[4],brick[5]
    mine = settled_bricks[key]
    if (i,j,k) not in mine or (x,y,z) not in mine:
        print(key,brick,mine, supporting_bricks[key], settled_bricks[53])